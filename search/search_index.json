{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Personal Homelab","text":"<p>This documentation describes a dual-server self-hosted homelab: - Lenovo laptop running Arch Linux - Android device running Linux via Termux</p>"},{"location":"#goals","title":"Goals","text":"<ul> <li>Zero cloud dependency</li> <li>Private, encrypted access</li> <li>Learning Linux, networking, and infra design</li> <li>Stable services without public exposure This setup follows zero-trust principles and a Tailscale-only access model.</li> </ul> <p>This documentation teaches how to design, build, and maintain a real homelab.</p> <p>You will learn: - Linux fundamentals - Networking concepts - Service hosting - Security (Zero Trust) - Failure recovery</p> <p>This is not cloud-dependent and not enterprise-only.</p>"},{"location":"architecture/","title":"Architecture Overview","text":"<p>This page provides a concise overview of the homelab architecture, focusing on server roles, design principles, and core ideas.</p> <p>It is intended as a quick reference before diving into detailed architecture and networking documents.</p>"},{"location":"architecture/#servers","title":"\ud83d\udda5\ufe0f Servers","text":"Server OS Purpose Lenovo Laptop Arch Linux Main compute node and persistent storage Android Device Termux (Linux userspace) DNS, monitoring, lightweight radar services"},{"location":"architecture/#design-principles","title":"Design Principles","text":"<p>The architecture follows these non-negotiable principles:</p> <ul> <li> <p>Heavy workloads stay on Lenovo   Core services, storage, and compute-intensive tasks run only on stable hardware.</p> </li> <li> <p>Android stays lightweight and disposable   Android devices are treated as replaceable edge nodes with no critical data.</p> </li> <li> <p>No public ports   No service is exposed directly to the internet.</p> </li> <li> <p>Identity-based access only   Access is granted based on authenticated identity, not network location.</p> </li> </ul>"},{"location":"architecture/#key-ideas","title":"Key Ideas","text":"<p>These ideas guide all design decisions:</p> <ul> <li> <p>One job per machine   Each node has a clearly defined role.</p> </li> <li> <p>No public exposure   All access happens through authenticated private networking.</p> </li> <li> <p>Identity over IP   Trust is never derived from LAN, WAN, or physical location.</p> </li> </ul>"},{"location":"architecture/#summary","title":"Summary","text":"<p>This architecture: - Keeps critical data centralized and protected - Limits attack surface by design - Treats edge devices as disposable - Makes failure predictable and recoverable</p> <p>All other documentation expands on the rules defined here.</p>"},{"location":"arch-linux/manual-install/","title":"\ud83d\udc27 Arch Linux Manual Installation","text":"<p>This document describes a pure CLI-based Arch Linux installation for servers and homelabs.</p> <ul> <li>No GUI</li> <li>No installer scripts</li> <li>No shortcuts</li> <li>Everything is explicit and reproducible</li> </ul>"},{"location":"arch-linux/manual-install/#why-manual-install","title":"Why Manual Install?","text":"<ul> <li>Learn Linux internals</li> <li>Minimal system</li> <li>Full control</li> </ul>"},{"location":"arch-linux/manual-install/#steps","title":"Steps","text":"<ol> <li>Boot ISO</li> <li>Partition disk</li> <li>Mount filesystems</li> <li>Install base</li> <li>Install bootloader</li> <li>Create users</li> </ol> <pre><code>flowchart TD\n    ISO[Boot Arch ISO] --&gt; Prep[Prepare System]\n    Prep --&gt; Disk[Partition Disk]\n    Disk --&gt; FS[Format &amp; Mount]\n    FS --&gt; Base[Install Base System]\n    Base --&gt; Config[System Configuration]\n    Config --&gt; Boot[Bootloader Setup]\n    Boot --&gt; Reboot[Reboot into Arch]</code></pre>"},{"location":"arch-linux/manual-install/#step-1-boot-preparation","title":"Step 1 \u2014 Boot &amp; Preparation","text":"<p>Boot using the official Arch Linux ISO.</p> <p>Verify UEFI mode:</p> <pre><code>ls /sys/firmware/efi/efivars\n</code></pre> <p>Enable NTP and set keyboard:</p> <pre><code>loadkeys us\ntimedatectl set-ntp true\n</code></pre>"},{"location":"arch-linux/manual-install/#step-2-disk-partitioning-cli","title":"Step 2 \u2014 Disk Partitioning (CLI)","text":"<p>List available disks:</p> <p><pre><code>lsblk\n</code></pre> Example Partition Scheme <pre><code>Disk: /dev/sda\n\u251c\u2500 EFI   512 MB   FAT32   /boot\n\u2514\u2500 Root  Remaining  ext4  /\n</code></pre></p> <p>Partition using cfdisk: <pre><code>cfdisk /dev/sda\n</code></pre> Create:</p> <ul> <li>EFI System Partition</li> <li>Linux filesystem partition</li> </ul>"},{"location":"arch-linux/manual-install/#step-3-format-mount","title":"Step 3 \u2014 Format &amp; Mount","text":"<pre><code>mkfs.fat -F32 /dev/sda1\nmkfs.ext4 /dev/sda2\n\nmount /dev/sda2 /mnt\nmkdir /mnt/boot\nmount /dev/sda1 /mnt/boot\n</code></pre>"},{"location":"arch-linux/manual-install/#step-4-install-base-system","title":"Step 4 \u2014 Install Base System","text":"<p><pre><code>pacstrap /mnt base linux linux-firmware vim sudo\n</code></pre> Generate fstab: <pre><code> genfstab -U /mnt &gt;&gt; /mnt/etc/fstab\n</code></pre> Chroot into system:</p> <pre><code>arch-chroot /mnt\n</code></pre>"},{"location":"arch-linux/manual-install/#step-5-core-configuration","title":"Step 5 \u2014 Core Configuration","text":"<p>Timezone &amp; Clock <pre><code>ln -sf /usr/share/zoneinfo/UTC /etc/localtime\nhwclock --systohc\n</code></pre> Locale</p> <p>Edit locale list: <pre><code>vim /etc/locale.gen\n</code></pre> Uncomment: <pre><code>en_US.UTF-8 UTF-8\n</code></pre> Generate locale: <pre><code>locale-gen\necho \"LANG=en_US.UTF-8\" &gt; /etc/locale.conf\n</code></pre></p>"},{"location":"arch-linux/manual-install/#step-6-networking-cli","title":"Step 6 \u2014 Networking (CLI)","text":"<p>Install NetworkManager: <pre><code>pacman -S networkmanager\nsystemctl enable NetworkManager\n</code></pre></p> <p>Note</p> <p>NetworkManager is used for stable CLI networking and recovery.</p>"},{"location":"arch-linux/manual-install/#step-7-users-privileges","title":"Step 7 \u2014 Users &amp; Privileges","text":"<p>Set root password: <pre><code>passwd\n</code></pre></p> <p>Create admin user: <pre><code>useradd -m -G wheel terrich\npasswd terrich\n</code></pre></p> <p>Enable sudo: <pre><code>EDITOR=vim visudo\n</code></pre></p> <p>Uncomment: <pre><code>%wheel ALL=(ALL:ALL) ALL\n</code></pre></p>"},{"location":"arch-linux/manual-install/#step-8-bootloader-systemd-boot-cli","title":"Step 8 \u2014 Bootloader (systemd-boot, CLI)","text":"<p>Install bootloader: <pre><code>bootctl install\n</code></pre></p> <p>Edit /boot/loader/loader.conf: <pre><code>default arch\ntimeout 3\neditor no\n</code></pre></p> <p>Create boot entry /boot/loader/entries/arch.conf: <pre><code>title   Arch Linux\nlinux   /vmlinuz-linux\ninitrd  /initramfs-linux.img\noptions root=UUID=&lt;ROOT_UUID&gt; rw\n</code></pre></p> <p>Get root UUID: <pre><code>blkid\n</code></pre></p>"},{"location":"arch-linux/manual-install/#step-9-reboot","title":"Step 9 \u2014 Reboot","text":"<p><pre><code>exit\numount -R /mnt\nreboot\n</code></pre> Post-Install Security Model</p> <pre><code>sequenceDiagram\n    participant User\n    participant Network\n    participant Server\n\n    User-&gt;&gt;Network: Authenticated access\n    Network-&gt;&gt;Server: Encrypted connection\n    Server--&gt;&gt;Network: Response\n    Network--&gt;&gt;User: Encrypted response</code></pre> <p>Danger</p> <ul> <li>No public services</li> <li>SSH keys only</li> <li>Firewall mandatory</li> <li>VPN-based access preferred</li> </ul> <p>Filesystem Policy <pre><code>/        \u2192 OS (reinstallable)\n/srv     \u2192 persistent data\n/home    \u2192 user config only\n</code></pre></p> <p>Note</p> <p>Backups apply to /srv, not /.</p> <p>Maintenance Policy (CLI)</p> <p>System Updates <pre><code>pacman -Syu\n</code></pre></p> <p>Rules:</p> <ul> <li>Update regularly</li> <li>Read output carefully</li> <li>Never interrupt upgrades</li> </ul> <p>Reboot Policy:</p> <ul> <li>Kernel updates \u2192 reboot required</li> <li>Plan reboots during low-usage windows</li> </ul> <p>Failure Handling Model <pre><code>flowchart LR\n    Failure --&gt; OS{OS Broken?}\n    OS --&gt;|Yes| Reinstall[Reinstall Arch]\n    OS --&gt;|No| Service{Service Issue?}\n    Service --&gt;|Yes| Redeploy[Redeploy Service]\n    Service --&gt;|No| Disk{Disk Failure?}\n    Disk --&gt;|Yes| Restore[Restore Backup]</code></pre></p> <p>Danger</p> <p>Failure must result in redeploy, not manual patching.</p> <p>End State  :</p> <ul> <li>If this guide is followed:</li> <li>System is minimal</li> <li>All configuration is explicit</li> <li>Recovery is predictable</li> <li>Data survives OS loss</li> </ul>"},{"location":"maintenance/disaster-recovery/","title":"Disaster Recovery","text":""},{"location":"maintenance/disaster-recovery/#goals","title":"Goals","text":"<ul> <li>Restore system functionality quickly</li> <li>Preserve critical data</li> <li>Minimize downtime</li> </ul>"},{"location":"maintenance/disaster-recovery/#common-failure-scenarios","title":"Common Failure Scenarios","text":"<ul> <li>System fails to boot</li> <li>Network or DNS outage</li> <li>Service crash or misconfiguration</li> <li>Disk or filesystem corruption</li> <li>Accidental deletion or overwrite</li> </ul>"},{"location":"maintenance/disaster-recovery/#recovery-procedure","title":"Recovery Procedure","text":""},{"location":"maintenance/disaster-recovery/#1-boot-into-recovery-environment","title":"1. Boot into Recovery Environment","text":"<ul> <li>Use Arch ISO / Live USB</li> <li>Ensure internet connectivity</li> </ul> <pre><code>ip a\nping -c 3 archlinux.org\n</code></pre>"},{"location":"maintenance/disaster-recovery/#2-mount-existing-system","title":"2. Mount Existing System","text":"<p><pre><code>mount /dev/sda2 /mnt          # Root\nmount /dev/sda1 /mnt/boot     # EFI\n</code></pre> Adjust device names as required.</p>"},{"location":"maintenance/disaster-recovery/#3-chroot-into-installed-system","title":"3. Chroot into Installed System","text":"<pre><code>arch-chroot /mnt\n</code></pre>"},{"location":"maintenance/disaster-recovery/#4-repair-bootloader-uefi","title":"4. Repair Bootloader (UEFI)","text":"<p><pre><code>bootctl install\n</code></pre> OR (GRUB): <pre><code>grub-install --target=x86_64-efi --efi-directory=/boot\ngrub-mkconfig -o /boot/grub/grub.cfg\n</code></pre></p>"},{"location":"maintenance/disaster-recovery/#5-network-dns-recovery","title":"5. Network &amp; DNS Recovery","text":"<p><pre><code>systemctl restart NetworkManager\nresolvectl status\n</code></pre> DNS test: <pre><code>dig google.com\n</code></pre></p>"},{"location":"maintenance/disaster-recovery/#6-restore-from-backup","title":"6. Restore from Backup","text":"<p>rsync-based restore <pre><code>rsync -aAXv /backup/rootfs/ /mnt/\n</code></pre></p> <p>tar archive restore <pre><code>tar -xpvf backup.tar.gz -C /mnt\n</code></pre></p>"},{"location":"maintenance/disaster-recovery/#7-verify-system-services","title":"7. Verify System Services","text":"<pre><code>systemctl --failed\nsystemctl status sshd\n</code></pre>"},{"location":"maintenance/disaster-recovery/#8-reboot-system","title":"8. Reboot System","text":"<pre><code>exit\numount -R /mnt\nreboot\n</code></pre>"},{"location":"maintenance/disaster-recovery/#prevention-best-practices","title":"Prevention &amp; Best Practices","text":"<p>Scheduled Backups <pre><code>rsync -aAX --delete / /backup/rootfs/\n</code></pre> Snapshot (Btrfs) <pre><code>btrfs subvolume snapshot / /@snapshot-pre-upgrade\n</code></pre> Health Monitoring :</p> <ul> <li>Disk usage: df -h</li> <li>Disk health: smartctl -a /dev/sda</li> <li>Critical logs: journalctl -p 3 -xb</li> </ul> <p>\ud83e\udde0 Reminder</p> <p>If you haven\u2019t tested recovery, you don\u2019t have a backup \u2014 you have hope.</p>"},{"location":"maintenance/health-checks/","title":"Health Checks","text":""},{"location":"maintenance/health-checks/#http-check","title":"HTTP Check","text":"<pre><code>curl -f http://localhost:PORT\n</code></pre> <ul> <li>-f \u2192 fails on non-2xx responses</li> <li>Useful for verifying local services and reverse proxies</li> </ul> <p>DNS Check <pre><code>dig @ANDROID_TS_IP google.com\n</code></pre></p> <ul> <li>Confirms DNS resolution through the Android/Tailscale node</li> <li>Replace ANDROID_TS_IP with the actual Tailscale IP</li> </ul>"},{"location":"networking/basics/","title":"\ud83c\udf10 Networking Basics","text":"<p>This document defines the core networking principles used across the homelab.</p> <p>These rules apply to all servers, services, and devices unless explicitly stated otherwise.</p>"},{"location":"networking/basics/#core-principles","title":"Core Principles","text":""},{"location":"networking/basics/#1-no-public-exposure-by-default","title":"1. No Public Exposure by Default","text":"<ul> <li>No services are exposed directly to the internet</li> <li>No port forwarding on the router</li> <li>No public IP assumptions</li> </ul> <p>Public access is treated as an exception, not the default.</p>"},{"location":"networking/basics/#2-private-network-first","title":"2. Private Network First","text":"<p>All services operate on a private network:</p> <ul> <li>Internal LAN</li> <li>Tailscale overlay network</li> </ul> <p>If a service cannot function privately, it does not belong in this setup.</p>"},{"location":"networking/basics/#3-identity-ip-address","title":"3. Identity &gt; IP Address","text":"<p>Access is based on identity, not source IPs.</p> <ul> <li>Devices are authenticated</li> <li>Users are authenticated</li> <li>Network location alone is never trusted</li> </ul>"},{"location":"networking/basics/#4-assume-network-failure","title":"4. Assume Network Failure","text":"<p>The system is designed with the assumption that: - Internet may go down - Devices may disconnect - Overlay networking may fail</p> <p>Failure must result in loss of access, not loss of data.</p>"},{"location":"networking/basics/#high-level-traffic-flow","title":"\ud83d\udd01 High-Level Traffic Flow","text":"<pre><code>flowchart LR\n    Client --&gt; PrivateNetwork\n    PrivateNetwork --&gt; Services</code></pre>"},{"location":"networking/diagrams/","title":"\ud83c\udf10 Network Diagrams","text":""},{"location":"networking/diagrams/#full-architecture","title":"Full Architecture","text":"<pre><code>\ngraph TD\n    User[User Devices] --&gt; Tailscale[Tailscale Network]</code></pre> <pre><code>Tailscale --&gt; Lenovo[Lenovo Server]\nTailscale --&gt; Android[Android (Termux)]\n\nLenovo --&gt; Immich[Immich]\nLenovo --&gt; Jellyfin[Jellyfin]\nLenovo --&gt; Plex[Plex]\n\nAndroid --&gt; DNS[AdGuard DNS]\n</code></pre>"},{"location":"networking/diagrams/#dns-request-flow","title":"DNS Request Flow","text":"<pre><code>\nsequenceDiagram\n    participant Client\n    participant DNS as AdGuard DNS\n\n    Client-&gt;&gt;DNS: Query\n    DNS--&gt;&gt;Client: Response</code></pre>"},{"location":"networking/diagrams/#rationale","title":"Rationale","text":"<p>This is a security-first design choice, not a failure mode.</p> <ul> <li>Public exposure increases attack surface</li> <li>Tailscale provides identity-based access control</li> <li>Availability is traded for security by design</li> </ul>"},{"location":"networking/diagrams/#failure-model","title":"Failure model","text":"<p>If Tailscale is unavailable:</p> <ul> <li>Services remain running</li> <li>Data remains safe</li> <li>External access is blocked by design</li> </ul> <p>Restoring access requires restoring Tailscale, not reconfiguring services.</p>"},{"location":"networking/reverse-proxy/","title":"\ud83d\udd01 Reverse Proxy Explained","text":""},{"location":"networking/reverse-proxy/#problem","title":"Problem","text":"<p>One IP, many services.</p>"},{"location":"networking/reverse-proxy/#solution","title":"Solution","text":"<p>Reverse proxy routes traffic internally.</p>"},{"location":"networking/reverse-proxy/#tool-used","title":"Tool Used","text":"<p>Nginx Proxy Manager</p>"},{"location":"networking/reverse-proxy/#reverse-proxy-architecture","title":"\ud83d\udd01 Reverse Proxy Architecture","text":"<p>The reverse proxy is used for internal service routing, not public exposure.</p> <p>It simplifies access inside the private network while maintaining strict access controls.</p>"},{"location":"networking/reverse-proxy/#why-a-reverse-proxy","title":"Why a Reverse Proxy?","text":"<ul> <li>Single entry point for multiple services</li> <li>Centralized TLS handling</li> <li>Cleaner URLs (no ports)</li> <li>Easier service management</li> </ul> <p>The reverse proxy improves usability, not accessibility.</p>"},{"location":"networking/reverse-proxy/#design-rule-reverse-proxy-scope","title":"Design Rule: Reverse Proxy Scope","text":"<p>Internal Use Only</p> <p>The reverse proxy must never be publicly exposed.</p> <ul> <li>It listens only on private interfaces</li> <li>It is accessible only via Tailscale</li> <li>It does not replace firewall or access controls</li> </ul> <p>If the reverse proxy becomes public, the design is broken.</p>"},{"location":"networking/reverse-proxy/#access-model","title":"\ud83d\udd10 Access Model","text":"<p>All access follows this path:</p> <pre><code>sequenceDiagram\n    participant Client\n    participant TS as Tailscale\n    participant RP as Reverse Proxy\n    participant Service\n\n    Client-&gt;&gt;TS: Authenticate\n    TS-&gt;&gt;RP: Encrypted request\n    RP-&gt;&gt;Service: Route request\n    Service--&gt;&gt;RP: Response\n    RP--&gt;&gt;TS: Forward response\n    TS--&gt;&gt;Client: Encrypted response</code></pre>"},{"location":"networking/tailscale-only/","title":"\ud83d\udd12 Tailscale-Only Architecture","text":"<p>All external access to the homelab is strictly limited to Tailscale.</p> <p>There are no public-facing services.</p>"},{"location":"networking/tailscale-only/#why-tailscale","title":"Why Tailscale?","text":"<ul> <li>No port forwarding</li> <li>End-to-end encrypted traffic</li> <li>Identity-based access control</li> <li>Works behind NAT and CGNAT</li> <li>Simple device-level authentication</li> </ul> <p>Tailscale is the single ingress layer for the entire network.</p>"},{"location":"networking/tailscale-only/#design-rule-network-access","title":"Design Rule: Network Access","text":"<p>Intentional Access Restriction</p> <p>All services are only accessible via Tailscale.</p> <p>If Tailscale is unavailable: - Access is intentionally blocked - No public fallback exists - No ports are exposed to the internet</p> <p>This is by design, not a failure.</p>"},{"location":"networking/tailscale-only/#failure-model","title":"\ud83d\udd01 Failure Model","text":"<p>Tailscale downtime is treated as a security state, not an outage.</p> <ul> <li>Services continue running internally</li> <li>Data remains safe and unchanged</li> <li>External access is denied by default</li> </ul> <p>Restoring access requires restoring Tailscale, not reconfiguring routers, firewalls, or services.</p>"},{"location":"networking/tailscale-only/#access-flow","title":"\ud83c\udf10 Access Flow","text":"<pre><code>sequenceDiagram\n    participant Client\n    participant TS as Tailscale\n    participant Service\n\n    Client-&gt;&gt;TS: Authenticate (device + user)\n    TS-&gt;&gt;Service: Encrypted request\n    Service--&gt;&gt;TS: Response\n    TS--&gt;&gt;Client: Encrypted response</code></pre>"},{"location":"networking/zero-trust/","title":"\ud83d\udee1\ufe0f Zero Trust Model","text":"<p>This homelab follows a Zero Trust security model.</p> <p>No device, service, or network is trusted by default \u2014 every request must prove identity and authorization.</p>"},{"location":"networking/zero-trust/#core-principles","title":"Core Principles","text":""},{"location":"networking/zero-trust/#1-never-trust-the-network","title":"1. Never Trust the Network","text":"<ul> <li>LAN is not trusted</li> <li>Wi-Fi is not trusted</li> <li>Physical location is not trusted</li> </ul> <p>Network access alone does not grant access to services.</p>"},{"location":"networking/zero-trust/#2-verify-identity-for-every-connection","title":"2. Verify Identity for Every Connection","text":"<p>Access is based on: - Authenticated users - Authenticated devices - Explicit service permissions</p> <p>Identity is required before any service interaction.</p>"},{"location":"networking/zero-trust/#3-minimize-blast-radius","title":"3. Minimize Blast Radius","text":"<ul> <li>Services are isolated</li> <li>Nodes are disposable</li> <li>No shared credentials</li> <li>No broad network access</li> </ul> <p>Compromise of one component must not expose others.</p>"},{"location":"networking/zero-trust/#enforcement-layers","title":"Enforcement Layers","text":"<p>Zero Trust is enforced through multiple independent layers.</p> Layer Enforcement Network access Tailscale authentication Device trust Tailscale device identity Service routing Internal reverse proxy Data access Service-level authentication Storage Off-device persistence <p>No single layer is sufficient on its own.</p>"},{"location":"networking/zero-trust/#request-flow-zero-trust-in-action","title":"\ud83c\udf10 Request Flow (Zero Trust in Action)","text":"<pre><code>sequenceDiagram\n    participant Client\n    participant TS as Tailscale\n    participant RP as Reverse Proxy\n    participant Service\n\n    Client-&gt;&gt;TS: Authenticate user + device\n    TS-&gt;&gt;RP: Encrypted request\n    RP-&gt;&gt;Service: Forward (no auth bypass)\n    Service--&gt;&gt;RP: Authorized response\n    RP--&gt;&gt;TS: Return response\n    TS--&gt;&gt;Client: Encrypted response</code></pre>"},{"location":"servers/android-termux/","title":"Android Termux Server","text":"<p>The Android device running Termux functions as a lightweight edge node in the homelab.</p> <p>It is intentionally stateless, low power, and disposable.</p>"},{"location":"servers/android-termux/#environment","title":"Environment","text":"<ul> <li>Android device</li> <li>Termux (installed via F-Droid)</li> <li>Linux userspace (proot)</li> </ul> <p>This environment provides flexibility, not durability.</p>"},{"location":"servers/android-termux/#services","title":"Services","text":"<p>The following services may run on the Android node:</p> <ul> <li>AdGuard / Pi-hole \u2014 DNS and ad blocking</li> <li>Sophia Radar System \u2014 monitoring and lightweight automation</li> <li>Network utilities \u2014 diagnostics and helpers</li> </ul> <p>All services are accessed only via Tailscale.</p>"},{"location":"servers/android-termux/#purpose","title":"Purpose","text":"<p>The Android Termux server exists to provide:</p> <ul> <li>Always-on availability</li> <li>Very low power consumption</li> <li>Network intelligence</li> </ul> <p>It is a network brain, not a storage node.</p>"},{"location":"servers/android-termux/#design-rule-data-separation","title":"Design Rule: Data Separation","text":"<p>Non-Negotiable Rule</p> <p>Important data must live separately from replaceable data.</p> <p>Android devices must never be the primary storage location for: - Databases - Secrets or API keys - Backups - User data</p> <p>Android + Termux must be treated as disposable infrastructure.</p>"},{"location":"servers/android-termux/#why-this-rule-exists","title":"Why This Rule Exists","text":"<ul> <li>Android can kill background services at any time</li> <li>App data may be wiped by the OS or user without warning</li> <li>Termux does not provide durability guarantees</li> <li>Mobile storage is not designed for long-term persistence</li> </ul> <p>This is an architectural constraint, not a limitation.</p>"},{"location":"servers/android-termux/#where-critical-data-must-live","title":"Where Critical Data MUST Live","text":"Data Type Approved Location Databases Remote server / NAS Secrets Secure vault or environment injection Backups Off-device storage Logs (long-term) Centralized log server <p>If data matters, it does not belong on Android.</p>"},{"location":"servers/android-termux/#what-is-allowed-on-android","title":"What IS Allowed on Android","text":"<p>The following are explicitly permitted:</p> <ul> <li>DNS cache</li> <li>Temporary files</li> <li>Stateless services</li> <li>Monitoring agents</li> <li>Ephemeral runtime data</li> </ul> <p>Everything here must be safe to lose.</p>"},{"location":"servers/android-termux/#failure-model","title":"Failure Model","text":"<p>If this device is lost, wiped, or factory-reset:</p> <ul> <li>No important data is lost</li> <li>No recovery from backups is required</li> <li>Services are restored via redeploy only</li> </ul> <p>If recovery requires data restoration, the design is wrong.</p>"},{"location":"servers/lenovo/","title":"\ud83d\udda5\ufe0f Lenovo Arch Linux Server","text":"<p>The Lenovo laptop running Arch Linux acts as the primary homelab node.</p> <p>It is the only machine trusted with persistent data and heavy workloads.</p>"},{"location":"servers/lenovo/#role","title":"Role","text":"<p>Primary server responsible for:</p> <ul> <li>Media services</li> <li>Photo management</li> <li>Internal reverse proxy</li> <li>Persistent storage</li> </ul> <p>This node is considered stateful and durable.</p>"},{"location":"servers/lenovo/#services-hosted","title":"Services Hosted","text":"<p>The following services run on the Lenovo server:</p> <ul> <li>Immich \u2014 photo storage and management</li> <li>Jellyfin \u2014 media streaming</li> <li>Plex \u2014 media streaming</li> <li>Nginx Proxy Manager \u2014 internal reverse proxy</li> </ul> <p>All services are accessible only via Tailscale.</p>"},{"location":"servers/lenovo/#why-lenovo","title":"Why Lenovo?","text":"<p>The Lenovo laptop was chosen for stability and reliability:</p> <ul> <li>Stable and continuous power</li> <li>Better CPU compared to mobile devices</li> <li>Supports persistent internal storage</li> <li>Suitable for long-running services</li> </ul>"},{"location":"servers/lenovo/#why-a-laptop","title":"Why a Laptop?","text":"<p>Using a laptop as a server provides practical advantages:</p> <ul> <li>Built-in battery acts as a mini-UPS</li> <li>Lower power consumption than desktops</li> <li>Designed for long uptime</li> <li>Reliable consumer-grade hardware</li> </ul>"},{"location":"servers/lenovo/#storage-layout","title":"Storage Layout","text":"<p>Persistent data is clearly separated by importance:</p> <pre><code>/srv/photos    \u2192 critical user data (must be backed up)\n/srv/media     \u2192 replaceable media content\n/srv/services  \u2192 service configs and state\n</code></pre>"},{"location":"servers/termux-optimizations/","title":"Termux Optimization Guide","text":"<p>This document defines hard limits, operational rules, and required settings for running long-lived services on Android using Termux.</p> <p>Termux is powerful, but hostile by default to background workloads.</p>"},{"location":"servers/termux-optimizations/#hard-limits-non-negotiable","title":"Hard Limits (Non-Negotiable)","text":"<p>Android + Termux has unavoidable constraints:</p> <ul> <li>No <code>systemd</code></li> <li>No Docker</li> <li>Aggressive background process killing</li> <li>No privileged ports (&lt;1024)</li> <li>No guaranteed process lifetime</li> </ul> <p>Design must work within these limits.</p>"},{"location":"servers/termux-optimizations/#operational-rules","title":"Operational Rules","text":"<p>The following rules are mandatory:</p> <ul> <li>One service = one process</li> <li>Use <code>tmux</code> for all long-running services</li> <li>No critical data stored locally</li> <li>Services must tolerate unexpected restarts</li> </ul> <p>If a service cannot restart cleanly, it does not belong on Termux.</p>"},{"location":"servers/termux-optimizations/#startup-management","title":"Startup Management","text":"<p>All services are started via a single script.</p> <p>Location <pre><code>~/start-services.sh\n</code></pre></p> <pre><code>tmux new -d -s dns \"~/adguard/AdGuardHome\"\ntmux new -d -s radar \"cd ~/sophia &amp;&amp; python main.py\"\n</code></pre> <p>##  Mandatory Settings</p> <p>Required for Stability</p> <p>These settings are not optional. Without them, Android will kill background services.</p> <ul> <li>Disable battery optimization for Termux</li> <li>Allow background activity</li> <li>Lock Termux in recent apps</li> </ul> <p>If these settings are not applied, the system is expected to fail.</p>"}]}